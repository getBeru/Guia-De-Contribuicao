# Guia de Contribui√ß√£o ‚Äî Tema Beru (VS Code)

Este documento explica **como o tema funciona por dentro**, **o que pode ou n√£o ser alterado**, e **como contribuir corretamente** sem cair em armadilhas comuns do VS Code.

A ideia √© simples: qualquer melhoria deve vir via **Pull Request**, com clareza t√©cnica e sem tentativa no escuro.

---

## 1. Vis√£o geral do projeto

O Beru √© um **tema para VS Code** baseado em **YAML + build script** que gera o JSON final consumido pelo editor.

Fluxo geral:

```
YAML (com anchors) ‚Üí build.js ‚Üí theme.json ‚Üí VS Code
```

Tudo que voc√™ altera visualmente **passa primeiro pelo YAML**.

---

## 2. Como funciona a defini√ß√£o de cores

### 2.1 Anchors (&) e aliases (*)

As cores s√£o definidas usando **YAML anchors**.

Exemplo:

```yaml
- &YELLOW '#eeba61'
```

Uso:

```yaml
foreground: *YELLOW
```

‚ö†Ô∏è **Regra de ouro:**

* Se um alias (`*COLOR3`) for usado antes do anchor (`&COLOR3`) existir
* Ou se uma string n√£o for fechada (`'#EF4444`)

üëâ o build **quebra inteiro**.

Sempre revise aspas.

---

## 3. Ordem das regras importa (muito)

O VS Code **n√£o usa especificidade**, s√≥ **ordem**.

> A √∫ltima regra que bate em um token **vence**.

Por isso:

* Regras gen√©ricas (`support`, `variable`, `keyword`) sobrescrevem regras espec√≠ficas
* Ajustes finos devem ficar **no final do arquivo**

---

## 4. Como o VS Code realmente tokeniza CSS / SCSS

Esse √© o ponto mais importante do projeto.

### 4.1 Valores num√©ricos

```scss
font-size: 22px;
```

No VS Code isso √©:

```
22px ‚Üí constant.numeric.scss
```

‚ùå N√ÉO existe token separado para `px`
‚ùå N√ÉO existe token separado para `em`, `rem`, `%`

üëâ **N√£o √© poss√≠vel colorir apenas a unidade.**

Todos os temas famosos (Dracula, Omni, One Dark) funcionam assim.

---

### 4.2 !important

Em SCSS, `!important`:

* n√£o tem scope consistente
* √†s vezes cai em `meta.property-value.scss`
* √†s vezes herda a cor padr√£o

üëâ **N√£o √© confi√°vel estilizar `!important` via tema.**

Se um PR tentar isso, ser√° recusado.

---

## 5. O que √â poss√≠vel estilizar (e vale PR)

Esses scopes funcionam de verdade:

* Propriedades CSS

  * `entity.other.attribute-name.css`
* Valores num√©ricos (inclui px)

  * `constant.numeric.css`
  * `constant.numeric.scss`
* Cores hex

  * `constant.other.color.css`
* Fun√ß√µes

  * `support.function.css` (`calc`, `var`)
* Seletores

  * `meta.selector`

---

## 6. Como descobrir o scope correto

Antes de abrir PR:

1. `Ctrl + Shift + P`
2. **Developer: Inspect Editor Tokens and Scopes**
3. Clique no token
4. Copie o scope real

PRs sem essa verifica√ß√£o **n√£o ser√£o aceitos**.

---

## 7. Onde colocar regras novas

### Regras espec√≠ficas (CSS, SCSS, TS, etc)

‚û°Ô∏è **Sempre no final do arquivo**, ap√≥s regras gen√©ricas como:

* Language Built-ins
* Variables
* Keywords

Isso evita sobrescrita invis√≠vel.

---

## 8. Build e valida√ß√£o

Comandos:

```bash
npm install
npm run build
```

Se o build quebrar:

* verifique **anchors inexistentes**
* verifique **aspas n√£o fechadas**
* YAML **n√£o aponta o erro onde ele nasce**

Leia o stacktrace com calma.

---

## 9. Padr√£o para Pull Requests

Todo PR deve conter:

* O **problema visual** que resolve
* O **scope real** usado (copiado do Inspect Tokens)
* Screenshot antes/depois
* Nenhuma tentativa de estilizar `px` isolado ou `!important`

PR sem isso ser√° fechado sem discuss√£o.

---

## 10. Filosofia do tema

O Beru segue tr√™s princ√≠pios:

1. **Sem hacks fr√°geis**
2. **Respeitar limites do VS Code**
3. **Clareza visual acima de modismo**

Se a mudan√ßa viola um desses pontos, ela n√£o entra.

---

## 11. Conclus√£o

Se algo "n√£o muda":

* provavelmente **n√£o existe scope**
* ou est√° sendo sobrescrito

Isso n√£o √© erro do colaborador ‚Äî √© o motor do VS Code.

Melhorias s√£o bem-vindas.
Tentativas no escuro, n√£o.

Bem-vindo ao projeto üöÄ
